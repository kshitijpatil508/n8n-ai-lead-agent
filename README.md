# Form to CRM ‚Äî Unified Lead Capture & Distribution System üöÄ

**A robust n8n workflow that captures leads from a web form, validates them, and syncs them across Zoho CRM, HubSpot, Google Sheets, and a local Postgres database.**

---

## üìñ Overview

Managing leads across multiple platforms is tedious. **FORM to CRM** automates the entire intake process.
When a user submits the lead generation form, this workflow validates their data (checking email formats and phone numbers) and distributes the lead to **three** different systems simultaneously (Zoho, HubSpot, Google Sheets).

It also acts as a "Quality Gate" by filtering invalid entries into a separate `failed_leads` database table. Finally, it uses Generative AI (Gemini/Groq) to draft a professional summary email and notifies the admin/sales team instantly.

[![Live Demo](https://img.shields.io/badge/üöÄ_Live_Demo-Click_Here-blue?style=for-the-badge&logo=googleforms)](https://kpn8n.duckdns.org/form/418732f9-aab6-4aae-8bff-0a8a8318e4b9)

---


## ‚ú® Core Features & Technology Stack

| Feature | Description | Technology Used (n8n Nodes) |
| :--- | :--- | :--- |
| **1. Lead Capture Form** | A public web form collecting Name, Email, Phone, Company, and Service Interest. | `n8n-nodes-base.formTrigger` |
| **2. Data Validation** | Validates email format (Regex) and normalizes phone numbers before processing. | `Code Node`, `If Node` |
| **3. Multi-CRM Sync** | Simultaneously creates records in **Zoho CRM** and **HubSpot**. | `zohoCrm`, `hubspot` |
| **4. Data Persistence** | Stores all raw leads in a **Postgres** database and a **Google Sheet** for backup. | `postgres`, `googleSheets` |
| **5. Error Handling** | Invalid leads are caught and logged into a specific `failed_leads` SQL table for review. | `postgres` (Insert Faulty Leads) |
| **6. AI Notification** | Generates a professional HTML email summary of the lead using LLMs. | `langchain.agent`, `lmChatGoogleGemini`, `lmChatGroq` |
| **7. Admin Alert** | Sends the formatted AI-drafted email to the sales team/admin. | `gmail` |

---

## üì∏ Visuals

### 1. Workflow Diagram
<img width="1920" height="1080" alt="Screenshot 2025-11-21 at 17 38 10" src="https://github.com/user-attachments/assets/f8599303-4dd6-4f0b-bf2a-633b834e20ca" />

### 2. Lead Capture Form
<img width="584" height="934" alt="Screenshot 2025-11-21 at 20 19 55" src="https://github.com/user-attachments/assets/24f39ab9-b968-48a3-8bbb-8d907bdca968" />

### 3. AI Generated Email Notification
<img width="1932" height="933" alt="Screenshot 2025-11-21 at 20 21 01" src="https://github.com/user-attachments/assets/b2193326-8f92-47e6-a0a8-11a32dbf81f0" />


---

## üõ†Ô∏è Setup and Installation Guide

### Files
* **Workflow File:** `FORM to CRM.json` (Import this into your n8n instance).

### 1) Import the workflow
1.  Open your n8n editor.
2.  Import `FORM to CRM.json`.

### 2) Database Setup (Postgres)
You need a Postgres database with two tables: `crm.leads` and `crm.failed_leads`.
* **leads table:** `id, name, email, phone, company_name, service, message, source, submitted_at`
* **failed_leads table:** `payload, error`

### 3) Configure Credentials
Ensure these credentials are added in n8n:

| Credential Name | Purpose |
| :--- | :--- |
| **Postgres account** | To store valid and invalid leads. |
| **Zoho account** | To create leads in Zoho CRM. |
| **HubSpot account** | To create contacts in HubSpot. |
| **Google Sheets account** | To append rows to the master sheet. |
| **Google Gemini / Groq** | To generate the notification email text. |
| **Gmail account** | To send the final notification email. |

### 4) Form & Sheet Configuration
* **Google Sheets Node:** Open the "Append Lead in Google Sheet" node and select your own Spreadsheet and Sheet ID.
* **Form Trigger:** The form is ready to go. The URL will be generated by n8n (e.g., `https://your-instance.com/form/...`).

### 5) Test Run
1.  Open the Form URL.
2.  Fill in dummy data.
3.  Watch the workflow execute: It should add rows to Postgres/Sheets and contacts to Zoho/HubSpot.
4.  Check your email for the AI-generated summary.

---

## üéØ How it Works

1.  **Trigger:** User submits the form.
2.  **Normalize:** Code node strips non-numeric characters from phone and checks email regex.
3.  **Gatekeeper:**
    * **If Valid:** Proceed to main flow.
    * **If Invalid:** Log to `failed_leads` table and stop.
4.  **Broadcast:** The workflow splits into parallel branches to update Zoho, HubSpot, Google Sheets, and Postgres simultaneously.
5.  **Wait:** A `Merge` node waits for all CRM updates to complete successfully.
6.  **Draft & Send:** The AI Agent drafts a notification and Gmail sends it to the admin.

---

## ü§ù Contribution

Feel free to fork and adapt this for Salesforce, Pipedrive, or other CRMs!
